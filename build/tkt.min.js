/*! The knockout tools v0.0.3 | http://github/stalniy/tkt
(c) 20013 Sergiy Stotskiy <sergiy.stotskiy@freaksidea.com> 
MIT license */
!function(a){"function"==typeof define&&define.amd?define(["knockout","jquery"],a):ko.tkt=a(ko,jQuery)}(function(a,b){if(Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),!String.prototype.trim){var c=/^\s+/,d=/\s+$/;String.prototype.trim=function(){return this.replace(c,"").replace(d,"")}}Object.create||(Object.create=function(){function a(){}return function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}());var e={isValueBlank:function(a){return"undefined"==typeof a||"string"==typeof a&&""===a.trim()||"object"==typeof a&&e.isObjectEmpty(a)||Array.isArray(a)&&(0===a.length||"undefined"==typeof a[0])},isObjectEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},capitalize:function(a){return String(a||"").toUpperCase().substr(0,1)+a.toLowerCase().substr(1)},camelize:function(a){return a.replace(/[ _-](\w)/g,function(a,b){return b.toUpperCase()})},underscore:function(a){return a.charAt(0).toLowerCase()+a.substr(1).replace(/[A-Z]/g,function(a){return"_"+a}).toLowerCase()},mixin:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(!c||c(b[d],d))&&(a[d]=b[d]);return a},mixinAll:function(a){for(var b=1,c=arguments.length;c>b;b++)e.mixin(a,arguments[b]);return a},mixinIfUndefined:function(a,b){return e.mixin(a,b,function(b,c){return!(c in a)})},mixinPublic:function(a,b){return e.mixin(a,b,function(a,b){return"_"!==b.charAt(0)})},valueLocationIn:function(a,b){for(var c,d=b.split("."),e=a,f=0,g=d.length-1;g>f;++f)c=d[f],e=e[c]=e[c]||{};return{cursor:e,field:d[f]}},removeFieldsIn:function(a,b){for(var c=b.length;c--;){var d=e.valueLocationIn(a,b[c]);d&&delete d.cursor[d.field]}return a},deepExtend:function(){var a=Array.prototype.slice.call(arguments,0);return a.unshift(!0),$.extend.apply($,a)}};return function(a){function b(e){var f=this.prototype,g=this,h=e.initialize||function(){g.apply(this,arguments)},i=Object.create(f);return e.initialize&&delete e.initialize,e.include&&(d(i,e.include),delete e.include),h.prototype=a.mixin(i,e),h.prototype.constructor=h,h.extend=b,h.include=c,h}function c(){return e(this.prototype,arguments),this}function d(a,b){return e(a,b).setUpMixins=function(){for(var a=b.length;a--;)b[a].setUp&&b[a].setUp.call(this)},a}function e(b,c){for(var d=0,e=c.length;e>d;d++)a.mixinIfUndefined(b,c[d]);return b}Object.extend=b}(e),function(a,b){function c(c,d){return function(){var e=b(this),f=a.contextFor(e.get(0)).$parent;d.call(c,e.children(":first-child"),f,e)}}function d(b){var c=g[b.inScopeOf];c&&a.isObservable(c)&&c!=b.when&&c(!1),g[b.inScopeOf]=b.when}function e(a,b){a.stop(!0,!0),f(b.when)?a.slideDown(b.duration,b.then):a.is(":visible")&&a.slideUp(b.duration,b.then)}var f=a.utils.unwrapObservable,g={},h={};a.bindingHandlers.collapse={init:function(c,e){var i=e(),j=b(c);if(f(i.when)||j.hide(),i.inScopeOf){if(!a.isObservable(i.when))throw new Error("Option 'when' should be an observable if 'inScopeOf' is specified");d(i),h[i.inScopeOf]=h[i.inScopeOf]||0,h[i.inScopeOf]++,a.utils.domNodeDisposal.addDisposeCallback(c,function(){0===--h[i.inScopeOf]&&(delete g[i.inScopeOf],delete h[i.inScopeOf])})}},update:function(a,g,h,i){var j=b(a),k=g(),l=f(k.when);k.duration=k.duration||300,"function"==typeof k.call&&l&&c(i,k.call).call(a),"function"==typeof k.then&&(k.then=c(i,k.then)),"inScopeOf"in k&&l&&d(k),e(j,k)}}}(a,b),function(a){function b(a,b){return f[a]=b,this}function c(a){f[a]&&delete f[a]}function d(a){a.removeFormat=c,a.addFormat=b,a.update=function(a){return function(b,c,d,g,h){var i=d(),j=e(i.showAs);f[j]&&(c=f[j].bind(f,e(c()),i)),a(b,c,d,g,h)}}(a.update)}var e=a.utils.unwrapObservable,f={price:function(a,b){var c=e(b.priceSign)||"$",d=(Number(a)||0).toFixed("precision"in b?b.precision:2);return b.priceBefore?d+=" "+c:d=0>d?"- "+c+-1*d:c+d,d},options:function(a,b){var c=b.values[a];return a in b.values?c:a},noneIfEmpty:function(a,b){return String(a||b.none||"None")},"float":function(a,b){var c=parseFloat(String(a).replace(/,/g,".").replace(/\s+/g,""))||0;return c.toFixed("precision"in b?b.precision:2)},"int":function(a,b){return parseInt(a,b.intBase||10)||0},number:function(a){return Number(a)||0},percentage:function(a,b){return isNaN(+a)?a:this["float"](a,b)+"%"},boolIcon:function(a){return'<span class="icon-'+(a?"check":"unckeck")+'"></span>'},bool:function(a){return a?"Yes":"No"}},g=["text","html"];a.utils.arrayForEach(g,function(b){d(a.bindingHandlers[b])})}(a),a.bindingHandlers.hidden={update:function(b,c,d,e){var f=function(){return!a.utils.unwrapObservable(c())};a.bindingHandlers.visible.update(b,f,d,e)}},function(b){b.update=function(b){return function(c,d,e,f,g){var h=e();b.apply(this,arguments),h.withContext&&a.applyBindingsToDescendants(g,c)}}(b.update)}(a.bindingHandlers.html),function(a,b){function c(a){var b=n.valueDefs;for(var c in b)if(b.hasOwnProperty(c)&&c in a)return{buildFrom:b[c],name:c,config:a};return{name:"default",buildFrom:n.valueDefs["default"],config:a}}function d(b,d){var e=b[d],g=c(b);return b=d=null,function(b){var c=b.currentTarget,d=a.contextFor(this),h=d.$parents.slice(0),k=i.get(c,j);h.unshift(d.$data),k||(k=f(e,h),i.set(c,j,k));var l=h[k],m=g.buildFrom(c,d,b),n=l[e].apply(l,m.push&&m.pop?m:[m]);n!==!0&&b.preventDefault(),g.config.bubble===!1&&b.stopPropagation()}}function e(a){b(a).off(k)}function f(a,b){var c,d=0,e=b.length;do c=b[d];while((!c[a]||!c[a].apply)&&++d<e);if(d===e)throw new Error('Unknown method "'+a+'" in context');return d}function g(a){var b=a.trim().match(/^(\S+)\s+using\s+(\w+)(?:\s+and\s+toggle\s+with\s+(\w+)(?:\s+or\s+(\w+))?)?$/i);if(!b)throw new Error("'on' binding: invalid definition of 'collected' option.");return{attr:b[1],key:b[2],toggle:b[3]?b.slice(3):null}}function h(a,b,c){for(var d,e=n.options.toggleValueSeparator,f=-1,g=a.length;++f<g&&0!==String(a[f]).indexOf(b););if(d=a[f],c=c||[],d){d=d.split(e);var h=d[1]||"",i=c[1]||"";d[1]=h===i?c[0]:i,d[1]||d.pop(),a[f]=d.join(e)}else d=c[1]?b+e+c[0]:b,a.push(d)}var i=a.utils.domData,j="_tkt_context_index",k="._tkt_on_event_handler",l="_tkt_collected_values",m="_tkt_collected_defs",n={init:function(c,f){var g,h=f(),i=b(c);for(var j in h)!h.hasOwnProperty(j)||j in n.valueDefs||"string"!=typeof h[j]||(g=d(h,j),j=j.split(/\s+/,2),i.on(j[0]+k,j[1],g));a.utils.domNodeDisposal.addDisposeCallback(i[0],e)},valueDefs:{collected:function(a,c,d){var e=i.get(d.delegateTarget,m),f=this.config[this.name];if(!e){var e=g(f);i.set(d.delegateTarget,m,e)}var j=b(a),k=i.get(d.delegateTarget,l),n=j.attr(e.attr);return k&&d[e.key]||(k=[]),h(k,n,e.toggle),i.set(d.delegateTarget,l,k),k},data:function(a){var c=b(a),d=this.config[this.name];if("*"===d){var e=c.data();return e.bind&&delete e.bind,e}return c.data(d)||c.attr(d)},"default":function(a,b){return[b.$data,b.$parent]}},options:{toggleValueSeparator:"-"}};a.utils.arrayForEach("with,to,by,of,from,as,on,in,at".split(","),function(a){n.valueDefs[a]=n.valueDefs.data}),a.bindingHandlers.on=n}(a,b),function(a){var b=a.bindingHandlers.css;a.bindingHandlers.setChildrenCss={update:function(c,d,e,f){var g,h=d();if(h.call){var i,j=function(){return h.call(f,i)};g=function(c){i=a.bindingHandlers.setChildrenCss.elementToValue(c),b.update(c,j)}}else g=function(a){b.update(a,d)};a.utils.arrayForEach(c.childNodes,function(a){1===a.nodeType&&g(a)})},elementToValue:function(a){return a.getAttribute("data-name")}}}(a),a.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},e});